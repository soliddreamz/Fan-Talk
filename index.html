<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Fan Talk</title>

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0c1c3a">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Fan Talk">
<link rel="apple-touch-icon" href="icon-180.png">

<meta name="description" content="Talk into the mic like you‚Äôre talking through a fan. Record ‚Üí Play or Download. On-device processing. No uploads.">

<style>
  :root{
    --bg1:#0c1c3a;
    --bg2:#050b18;
    --card:rgba(255,255,255,0.06);
    --text:#eaf1ff;
    --muted:rgba(234,241,255,0.72);
    --btn1:#3b82f6;
    --btn2:#2563eb;
    --stroke:rgba(255,255,255,0.10);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    background:radial-gradient(circle at top, var(--bg1), var(--bg2));
    color:var(--text);
    font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    text-align:center;
    padding:18px 14px 22px;
  }
  .wrap{ max-width:460px; margin:0 auto; }
  .card{
    background:var(--card);
    border:1px solid var(--stroke);
    border-radius:22px;
    padding:18px 16px 16px;
    box-shadow:0 18px 50px rgba(0,0,0,0.40);
    backdrop-filter: blur(10px);
  }
  .logo{
    width:min(240px, 82vw);
    display:block;
    margin:2px auto 10px;
  }
  .desc{
    margin:6px auto 14px;
    color:var(--muted);
    font-size:14px;
  }
  .fanStage{ display:flex; justify-content:center; margin:10px 0 14px; }
  .fanRing{
    width:150px; height:150px;
    border-radius:999px;
    display:grid;
    place-items:center;
    background:radial-gradient(circle at 40% 35%, rgba(255,255,255,0.18), rgba(255,255,255,0.04) 55%, rgba(0,0,0,0.18));
    border:1px solid rgba(255,255,255,0.12);
  }
  .fanSVG{
    width:128px; height:128px;
    animation:spin 1.35s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .row{ display:flex; justify-content:center; gap:10px; }
  button{
    border:none; border-radius:14px;
    padding:13px 14px; min-width:140px;
    font-size:15px; font-weight:700;
    color:white;
    background:linear-gradient(135deg,var(--btn1),var(--btn2));
  }
  button.secondary{
    background:#101828;
    border:1px solid rgba(255,255,255,0.1);
  }
  button:disabled{ opacity:0.45; }
  .controls{ margin-top:10px; display:grid; gap:10px; }
  .label{ font-size:12px; color:var(--muted); text-align:left; width:92%; margin:auto; }
  select,input[type="range"]{
    width:92%; margin:auto;
    padding:12px; border-radius:14px;
    background:rgba(0,0,0,0.18);
    border:1px solid rgba(255,255,255,0.1);
    color:var(--text);
  }
  .status{
    margin-top:10px;
    font-size:13px;
    min-height:18px;
  }
  footer{ font-size:11px; color:rgba(255,255,255,0.5); margin-top:10px; }
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<img src="logo.png" class="logo" alt="Fan Talk" />

<div class="desc">
Talk into the mic like you‚Äôre talking through a fan. Record ‚Üí Play or Download.
</div>

<div class="fanStage">
<div class="fanRing">
<svg class="fanSVG" viewBox="0 0 100 100">
<circle cx="50" cy="50" r="6" fill="#fff"/>
<path d="M50 10 Q62 40 50 50 Q38 40 50 10Z" fill="#3b82f6"/>
<path d="M90 50 Q60 62 50 50 Q60 38 90 50Z" fill="#3b82f6"/>
<path d="M50 90 Q38 60 50 50 Q62 60 50 90Z" fill="#3b82f6"/>
<path d="M10 50 Q40 38 50 50 Q40 62 10 50Z" fill="#3b82f6"/>
</svg>
</div>
</div>

<div class="row">
<button id="recordBtn">üéô Record</button>
<button id="stopBtn" class="secondary" disabled>‚èπ Stop</button>
</div>

<div class="row">
<button id="playBtn" disabled>‚ñ∂ Play</button>
<button id="downloadBtn" class="secondary" disabled>‚¨á Download</button>
</div>

<div class="controls">
<div class="label">Preset</div>
<select>
<option>Slow Fan ‚Äî Nostalgic</option>
<option selected>Medium Fan ‚Äî Classic</option>
<option>Fast Fan ‚Äî Buzz</option>
</select>
</div>

<div id="status" class="status">Ready.</div>
<footer>On-device processing ¬∑ No uploads</footer>

</div>
</div>

<script>
/* ===============================
   Fan Talk ‚Äî Update Notice System
   =============================== */

const APP_VERSION = '1.0.0'; // ‚¨ÖÔ∏è bump this when you deploy updates

const statusEl = document.getElementById('status');

function showUpdateNotice(){
  statusEl.textContent = 'Update available. Close and reopen the app.';
}

/* Register service worker + listen for updates */
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('./sw.js').then(reg => {

    if(reg.waiting){
      showUpdateNotice();
    }

    reg.addEventListener('updatefound', () => {
      const newWorker = reg.installing;
      newWorker.addEventListener('statechange', () => {
        if(newWorker.state === 'installed' && navigator.serviceWorker.controller){
          showUpdateNotice();
        }
      });
    });

  });
}
</script>

</body>
</html>
